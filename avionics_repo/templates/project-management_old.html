{% extends 'base.html' %}
{% load static %}

{% block content %}

<!--<div class="tab-pane" id="tabsProject" role="tabpanel">-->

    <div class="card shadow mb-4">

        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-uppercase">Project Management</h6>
        </div>

        <div class="card-body">

            <form method="post" action="{% url 'new-process' %}"  enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-group mb-0">

                    <div class="row">

                        <div class="col-lg-4 mb-3">
                            <label class="mb-0" for="projectName">Project Name</label>
                            <input type="text" class="form-control" id="projectName" name="projectName">
                        </div>

                        <div class="col-lg-4 mb-3">
                            <label class="mb-0" for="projectName">Process Name</label>
                            <input type="text" class="form-control" id="processName" name="processName">
                        </div>

                        <div class="col-lg-4 mb-3 setDate">
                            <label class="mb-0" for="datepicker" >From Date</label>

                            <div class="dateHolder position-relative">
                                <input type="text" id="datepicker" class="form-control" name="fromdate">
                                <i class="fas fa-fw fa-calendar position-absolute"></i>
                            </div>
                        </div>

                        <div class="col-lg-4 mb-3 setDate position-relative">
                            <label class="mb-0" for="datepicker2">To Date</label>

                            <div class="dateHolder position-relative">
                                <input type="text" id="datepicker2" class="form-control" name="todate">
                                <i class="fas fa-fw fa-calendar position-absolute"></i>
                            </div>
                        </div>

                        <div class="col-lg-4 mb-3 setTime position-relative">
                            <label class="mb-0" for="timepicker">To Time</label>

                            <div class="dateHolder position-relative">
                                <input type="text" id="input" class="timepicker form-control" name="totime">
                                <i class="fas fa-fw fa-clock position-absolute"></i>
                            </div>
                        </div>

                        <div class="col-lg-12 mb-3">
                            <label class=" mb-0" for="projectFile" >Project File</label>
                            <input type='file' class="form-control col-lg-4 mb-3" id='t1' name="projectFile" />

                            <div class="mb-3 d-flex" id='clonedDiv'></div>
                        </div>

                        <div class="col-lg-4 mb-3 mt-2">
                            <button class="btn btn-secondary border-0 mr-1" type="button">Cancel</button>
                            <button class="btn btn-secondary border-0" type="submit">Save</button>
                        </div>

                    </div>

                </div>
            </form>

        </div>
        <script>
        {% if 'alreadyexists' == process_check  %}
            alert("process already exists");
        {% elif 'error' == process_check %}
            alert("Error occured");
        {% else %}
            console.log("all good");
        {% endif %}
    </script>

        <div class="updateTaskDiv mb-5 card shadow">

        <div class="card-header py-3">
            <label class="mb-0"><h4 class="m-0 text-uppercase"><b>Update Task </b></h4></label>
        </div>

        <div class="card-body updateRecord p-0">
            {% if projects%}
            {% for project in projects %}
            <div class="updateList d-flex justify-content-between p-3">

                <div class="updateLeft"><a href="{% url 'schedule-project' project.process_name %}">{{project.process_name}}</a>({{project.project_name}})</div>

                <div class="updateRight">

                    <a href="{% url 'delete_process' project.id %}" class="deleteProcess"><i class="fas fa-fw fa-trash"></i> Delete Process</a>

                    <a href="{% url 'update_task' project.id %}" class="updateProcess ml-3"><i class="fas fa-fw fa-recycle"></i> Update Process</a>

                </div>
            </div>
            {% endfor %}
            {% else %}
            <p>No Task Found</p>
            {% endif %}
        </div>
    </div>

    </div>

<!--</div>-->

{% endblock %}
